---
layout: default
title: EP02：Codex 2025 新功能和 MCP 设置
permalink: /modules/00-ai-setup/EP02-codex-features/
---

# EP02: Codex 2025 新功能和 MCP 设置 ⏱️ 20 分钟

## 🎯 这一步要完成什么

探索 Codex 2025 的杀手级功能：

- **图像上传**：直接上传设计图和线框图 📸
- **MCP 连接**：连接外部工具，扩展 AI 能力 🔌
- **智能任务跟踪**：自动管理开发进度 📋

## 🔥 第一部分：图像上传功能（5 分钟）

### 为什么这个功能对设计师是游戏规则改变者？

**以前的痛点**：

- 😫 用文字描述设计想法，AI 经常理解错误
- 😫 来回修改多次才能达到预期效果
- 😫 复杂的布局难以用语言准确表达

**现在的解决方案**：

- 🎯 直接上传 Figma 截图，AI 立即理解
- 🎯 线框图、手绘草图都能识别
- 🎯 "照着这个设计做一个网页"，一句话搞定

### 如何使用图像上传

1. **在 Codex 面板中找到上传按钮**

   - 对话框旁边有个 📎 或 📷 图标
   - 点击选择图片文件

2. **支持的图片格式**

   ```
   ✅ PNG、JPG、JPEG
   ✅ 设计稿截图
   ✅ 手绘线框图
   ✅ UI mockup
   ✅ 参考网站截图
   ```

3. **最佳实践**
   - 图片清晰，分辨率适中
   - 包含完整的设计内容
   - 可以同时上传多张图片对比

### 💡 实际应用场景

```
设计师：[上传登录页面设计图]
"请帮我实现这个登录页面，需要响应式布局"

Codex：[分析图片，生成对应的 HTML/CSS 代码]
```

## 🔌 第二部分：MCP 设置（15 分钟）

### 什么是 MCP？

**MCP = Model Context Protocol**

- 就像给 Codex 插上各种"技能插件"
- 让 AI 能连接网络搜索、文档查询、**设计工具**等
- 类似 Figma 的插件系统，但更强大

### 🎨 核心 MCP 配置：设计师的两大神器

#### 1. **Figma MCP** - 设计理解的直接桥梁 🚀

**革命性价值**：

- ✨ **直接读取 Figma 文件**：不需要截图，AI 直接理解你的设计
- ✨ **语义化设计理解**：识别组件、样式、变量、层级关系
- ✨ **设计系统分析**：智能提取变量和设计规律
- ✨ **结构化描述**：准确分析设计意图和实现思路

#### 2. **Context7** - 最新技术文档查询

**实用价值**：获取最新的设计框架和组件库文档，确保代码使用最新最佳实践

### 🎯 Figma MCP 配置（设计师必备！）

#### 第一步：Figma 桌面端启用（2 分钟）

1. **打开 Figma 桌面应用**

   - 确保你使用的是 Figma 桌面版（不是网页版）
   - 需要 Professional/Organization/Enterprise 计划

2. **启用 MCP 服务器**

   - 点击 Figma 菜单 → **Preferences**（首选项）
   - 找到 **"Enable local MCP Server"**
   - 启用 DEV 模式

3. **确认服务器运行**
   - 启用后，MCP 服务器会在后台运行
   - 服务器地址：`http://127.0.0.1:3845/mcp`

#### 第二步：VS Code Codex 连接（3 分钟）

1. **打开配置文件**

   ```bash
   code ~/.codex/config.toml
   ```

2. **添加 Figma MCP 配置**

   ```toml
   [mcp_servers.figma]
   command = "stdio"
   args = ["http://127.0.0.1:3845/mcp"]
   ```

3. **保存并重启**
   - 保存文件：`Ctrl/Cmd + S`
   - 重启 VS Code：`Ctrl/Cmd + Shift + P` → "Developer: Reload Window"

#### 第三步：神奇体验测试（5 分钟）

1. **在 Figma 中选择一个设计**

   - 打开任意 Figma 文件
   - 选择一个组件或页面区域

2. **在 Codex 中测试魔法**

   ```
   请分析我在Figma中选中的设计，描述它的布局结构和视觉特点。
   ```

3. **体验设计系统提取**

   ```
   提取当前Figma文件的设计变量和颜色系统。
   ```

4. **尝试设计理解**
   ```
   分析选中的设计，告诉我这个界面的功能和交互要素。
   ```

### 🔍 Context7 MCP 配置（5 分钟）

1. **添加 Context7 配置**

   ```toml
   [mcp_servers.context7]
   command = "npx"
   args = ["-y", "@upstash/context7-mcp"]
   ```

2. **测试功能**
   ```
   请介绍Tailwind CSS最新的设计系统特性。use context7
   ```

### 🌐 其他实用 MCP（了解即可）

- **Web Search**：网络搜索设计灵感和技术解决方案
- **Screenshot**：分析参考网站的实际实现
- **GitHub**：查询开源组件库和代码示例

_这些 MCP 可以后续按需配置，优先掌握 Figma + Context7 即可_

## 📋 第三部分：实用功能快览（5 分钟）

### 🚀 任务跟踪功能

**快速上手**：

```
"帮我规划个人作品集网站的开发任务"
"/todo"  # 查看当前任务列表
```

### 🛡️ 安全模式简介

**推荐设置**：

- **新手**：使用 `Read-Only` 模式（安全）
- **熟练后**：使用 `Auto` 模式（平衡）

**模式切换**：

```
"/mode auto"     # 推荐的平衡模式
"/mode readonly" # 安全的只读模式
```

## ✅ 验证测试

### 🎯 重点测试：Figma MCP 神奇体验

1. **在 Figma 中选择任意设计元素**
2. **在 Codex 中输入**：
   ```
   分析我在Figma中选中的设计，详细描述它的结构和特点。
   ```
3. **期待结果**：AI准确理解并描述你的设计内容

### 📸 测试图像上传

1. 上传一张界面设计图到 Codex
2. 问："分析这个设计并给出实现建议"
3. 看 AI 是否能准确理解设计意图

### 📚 测试 Context7 文档查询

```
请介绍React 18的最新Hook特性。use context7
```

## 🎨 设计师使用建议

### 🔥 Figma MCP 最佳实践

- **组件化设计**：在 Figma 中合理使用组件和变体
- **语义化命名**：给图层和组件起有意义的名字
- **设计系统**：利用变量和样式系统
- **分步选择**：复杂设计分成小块分别生成代码

### 💡 工作流程优化

1. **设计阶段**：在 Figma 中完成设计
2. **选择转换**：选中要实现的设计区域
3. **AI 生成**：用 Codex 生成对应代码
4. **快速迭代**：根据生成结果快速调整

## 🚨 注意事项

### Figma MCP 要求

- ✅ 需要 Figma 桌面版（非网页版）
- ✅ 需要 Professional/Organization/Enterprise 计划
- ✅ 需要有 Dev Mode 访问权限

### 常见问题

- **连接失败**：确认 Figma 桌面版已启用 MCP 服务器
- **无法读取**：检查是否选中了 Figma 中的设计元素
- **代码不准确**：尝试更具体的提示词描述需求

## 🎯 完成检查

- [ ] 成功上传并分析了一张设计图
- [ ] **配置了 Figma MCP 服务器**（核心！）
- [ ] 配置了 Context7 MCP 服务器
- [ ] 测试了 Figma 设计到代码的转换
- [ ] 了解了安全模式设置
- [ ] 体验了 AI 与设计工具的深度集成

## 🚀 下一步

**恭喜！** 🎉 你现在拥有了设计师梦寐以求的超能力：

✨ **Figma 直连 AI**：设计图直接变成代码
📚 **实时文档查询**：获取最新技术资料
🔄 **无缝工作流**：从设计到实现一站式

接下来学习如何个性化配置：[EP03: 设计师专属工作流](../EP03-designer-workflow/)

---

**设计师的新时代**：当 Figma 中的每一个设计都能瞬间转化为精确的代码时，你不再是"会设计的设计师"，而是"会编程的设计师"。这就是 2025 年，设计师的超级进化！ 🎨→💻→🚀
